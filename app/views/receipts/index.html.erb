<h2>Receipts</h2>

<%= search_form_for @q do |f| %>
  <%#= f.label :shop_name_or_item_detail_or_memo_cont , "Keyword" %>
  <%= f.search_field :shop_name_or_item_detail_or_memo_cont , placeholder: '検索ワード' %>

  <%= f.submit "検索" %>
<% end %>

<%= link_to "一覧に戻る", receipts_path %>

<div class:"table_receipt" style="width:100%; height:1800px; overflow:auto;">
  <table>
    <thead align="center">
      <tr>
        <th>user name</th>
        <th><%= sort_link(@q, :shop_name, "shop name") %></th>
        <th>Item detail</th>
        <th>Memo</th>
        <th><%= sort_link(@q, :price, "Price") %></th>
        <th>Image</th>
        <th><%= sort_link(@q, :created_at, "created_at") %></th>
        <th colspan="3"></th>
      </tr>
    </thead>

    <tbody align="center">
      <% @receipts.each do |receipt| %>
        <tr>
          <td><%= "#{receipt.user.username}さんのレシート"%></td>
          <td><%= receipt.shop_name %></td>
          <td><%= receipt.item_detail %></td>
          <td><%= receipt.memo %></td>
          <td><%= receipt.price %></td>
          <td><%= image_tag receipt.image.url %></td>
          <td><%= l receipt.created_at, format: :short %></td>
          <td><%= link_to 'Show', receipt %></td>

    <!-- ログインユーザーのみ入力できる -->
        <% if current_user.id == receipt.user.id %>
          <td><%= link_to 'Edit', edit_receipt_path(receipt), data: { confirm: '本当に編集していいですか？' } %></td>
          <td><%= link_to 'Destroy', receipt, method: :delete,data: { confirm: '本当に削除していいですか？' } %></td>
        <% end %>
        </tr>
      <% end %>
    </tbody>
  </table>

  <br>
  <%= link_to 'New Receipt', new_receipt_path %>
  <%= paginate @receipts  %>
</div>
