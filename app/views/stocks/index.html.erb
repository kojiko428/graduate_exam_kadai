<!-- diveceディフォルト  noticeの表示が2重に表示になるため-->
<!-- <p id="notice"><%#= notice %></p> -->

<h1>Stocks</h1>

<%= search_form_for @q do |f| %>
  <%= f.label :item_genre_or_item_name, "Keyword" %>
  <%= f.search_field :item_genre_or_item_name_cont %>

  <%= f.submit "検索" %>
<% end %>

<%= link_to "一覧に戻る", stocks_path %>

<table>
  <thead align="center">
    <tr>
      <th><%= sort_link(@q, :item_genre, "Item Genre") %></th>
      <th><%= sort_link(@q, :item_name, "Item name") %></th>
      <th>Content</th>
      <th><%= sort_link(@q, :price, "Price") %></th>
      <th>Image</th>
      <th><%= sort_link(@q, :number_of_stock, "number_of_stock") %></th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody align="center">
    <% @stocks.each do |stock| %>
    <!--自分が作成したタスクだけを表示させる -->
      <% if current_user.id == stock.user.id %>
        <tr>
          <td><%= stock.item_genre %></td>
          <td><%= stock.item_name %></td>
          <td><%= stock.content %></td>
          <td><%= stock.price %></td>
          <td><%= image_tag stock.image.url %></td>
          <td><%= stock.number_of_stock %></td>
          <td><%= link_to 'Show', stock %></td>
          <td><%= link_to 'Edit', edit_stock_path(stock), data: { confirm: '本当に編集していいですか？' } %></td>
          <td><%= link_to 'Destroy', stock, method: :delete,data: { confirm: '本当に削除していいですか？' } %></td>
        </tr>
      <% end %>
    <% end %>
  </tbody>
</table>

<br>


<%= link_to 'New Stock', new_stock_path %>
